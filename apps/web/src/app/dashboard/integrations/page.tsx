"use client";

import { useEffect, useState } from "react";
import { useRouter, useSearchParams } from "next/navigation";
import Link from "next/link";
import { Button } from "@/components/ui/button";
import {
  ArrowLeft,
  CheckCircle,
  XCircle,
  Loader2,
  Puzzle,
  Trash2,
  ExternalLink,
  ChevronRight,
} from "lucide-react";

interface Integration {
  id: string;
  type: string;
  name: string;
  isActive: boolean;
  config: {
    team_name?: string;
    default_channel_name?: string;
  };
  createdAt: string;
}

interface AvailableIntegration {
  id: string;
  name: string;
  description: string;
  icon: React.ReactNode;
  connected: boolean;
  integration?: Integration;
  comingSoon?: boolean;
}

export default function IntegrationsPage() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const success = searchParams.get("success");
  const error = searchParams.get("error");

  const [integrations, setIntegrations] = useState<Integration[]>([]);
  const [loading, setLoading] = useState(true);
  const [disconnecting, setDisconnecting] = useState<string | null>(null);

  const fetchIntegrations = async () => {
    try {
      const response = await fetch("/api/integrations");
      if (response.ok) {
        const data = await response.json();
        setIntegrations(data.integrations || []);
      }
    } catch (err) {
      console.error("Error fetching integrations:", err);
    } finally {
      setLoading(false);
    }
  };

  const handleDisconnect = async (id: string) => {
    if (!confirm("Are you sure you want to disconnect this integration?")) {
      return;
    }

    setDisconnecting(id);
    try {
      const response = await fetch(`/api/integrations/${id}`, {
        method: "DELETE",
      });
      if (response.ok) {
        setIntegrations(integrations.filter((i) => i.id !== id));
      }
    } catch (err) {
      console.error("Error disconnecting integration:", err);
    } finally {
      setDisconnecting(null);
    }
  };

  useEffect(() => {
    fetchIntegrations();
  }, []);

  // Build available integrations list
  const slackIntegration = integrations.find((i) => i.type === "slack");

  const availableIntegrations: AvailableIntegration[] = [
    {
      id: "slack",
      name: "Slack",
      description: "Send messages to your Slack channels",
      icon: (
        <svg className="w-8 h-8" viewBox="0 0 24 24" fill="none">
          <path d="M5.042 15.165a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Zm5.959-5.159a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Zm5.96-5.159a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Zm5.959-5.159a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Zm-8.806 7.677a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Zm5.959-5.159a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Zm5.96-5.159a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Zm5.959-5.159a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Z" fill="#E01E5A"/>
          <path d="M11.422 14.6a.58.58 0 0 1-.134-.014l-2.22-.381a.58.58 0 0 1-.448-.34l-.516-1.333a.58.58 0 0 0-.48-.385l-1.351-.26a.58.58 0 0 0-.52.202l-.896 1.082a.58.58 0 0 1-.518.207l-2.352-.112a.58.58 0 0 1-.495-.31l-.803-1.62a.58.58 0 0 1 .028-.574l1.348-1.956a.58.58 0 0 1 .478-.247l2.32-.082a.58.58 0 0 0 .462-.275l.694-1.404a.58.58 0 0 0-.034-.563l-1.24-1.75a.58.58 0 0 1 .07-.576l1.336-1.33a.58.58 0 0 1 .57-.074l1.93 1.01a.58.58 0 0 0 .555-.047l1.482-.577a.58.58 0 0 0 .364-.405l.299-2.196a.58.58 0 0 1 .514-.484l2.034-.128a.58.58 0 0 1 .537.347l.706 1.864a.58.58 0 0 0 .498.317l1.66-.024a.58.58 0 0 0 .482-.26l1.016-1.524a.58.58 0 0 1 .562-.192l1.924.603a.58.58 0 0 0 .509-.161l1.24-1.345a.58.58 0 0 1 .558-.099l1.69 1.01a.58.58 0 0 0 .535.004l1.334-.93a.58.58 0 0 1 .531-.017l.992.812a.58.58 0 0 0 .51.058l.594.603a.58.58 0 0 1 .168.524l-.053.71a.58.58 0 0 0 .253.478l.828.347a.58.58 0 0 0 .503-.043l.561-.416a.58.58 0 0 1 .48-.07l.342.29a.58.58 0 0 1 .183.518l-.196.657a.58.58 0 0 0 .328.43l.48.22a.58.58 0 0 0 .48-.06l.282-.236a.58.58 0 0 1 .468-.03l.236.214a.58.58 0 0 1 .194.504l-.152.56a.58.58 0 0 0 .362.4l.388.15a.58.58 0 0 0 .475-.084l.202-.18a.58.58 0 0 1 .46-.076l.197.173a.58.58 0 0 1 .203.494l-.109.472a.58.58 0 0 0 .387.38l.307.09a.58.58 0 0 0 .47-.103l.147-.13a.58.58 0 0 1 .46-.088l.169.148a.58.58 0 0 1 .211.487l-.073.397a.58.58 0 0 0 .402.365l.24.045a.58.58 0 0 0 .466-.118l.11-.107a.58.58 0 0 1 .462-.098l.146.122a.58.58 0 0 1 .217.48l-.043.34a.58.58 0 0 0 .41.347l.184.014a.58.58 0 0 0 .46-.13l.085-.087a.58.58 0 0 1 .466-.104l.127.102a.58.58 0 0 1 .22.474l-.02.293a.58.58 0 0 0 .416.33l.14-.017a.58.58 0 0 0 .455-.14l.066-.07a.58.58 0 0 1 .468-.107l.113.085a.58.58 0 0 1 .224.469l.004.25a.58.58 0 0 0 .42.314l.1-.047a.58.58 0 0 0 .45-.148l.052-.054a.58.58 0 0 1 .468-.108l.103.07a.58.58 0 0 1 .226.464l.026.21a.58.58 0 0 0 .425.3l.063-.077a.58.58 0 0 0 .447-.155l.04-.04a.58.58 0 0 1 .468-.107l.094.056a.58.58 0 0 1 .227.462l.047.173a.58.58 0 0 0 .43.286l.03-.106a.58.58 0 0 0 .444-.16l.03-.027a.58.58 0 0 1 .468-.106l.086.043a.58.58 0 0 1 .228.46l.066.138a.58.58 0 0 0 .433.273l.003-.134a.58.58 0 0 0 .442-.164l.022-.015a.58.58 0 0 1 .468-.105l.08.032a.58.58 0 0 1 .229.458l.083.104a.58.58 0 0 0 .435.26l-.022-.16a.58.58 0 0 0 .44-.168l.016-.005a.58.58 0 0 1 .468-.104l.074.022a.58.58 0 0 1 .23.456l.098.072a.58.58 0 0 0 .437.247l-.047-.183a.58.58 0 0 0 .438-.17l.012.004a.58.58 0 0 1 .468-.103l.07.013a.58.58 0 0 1 .23.455l.112.041a.58.58 0 0 0 .438.234l-.07-.206a.58.58 0 0 0 .437-.172l.008.012a.58.58 0 0 1 .468-.103l.065.004a.58.58 0 0 1 .232.453l.124.01a.58.58 0 0 0 .44.22l-.092-.226a.58.58 0 0 0 .435-.174l.005.019a.58.58 0 0 1 .468-.102l.06-.004a.58.58 0 0 1 .233.451l.135-.02a.58.58 0 0 0 .44.208l-.113-.244a.58.58 0 0 0 .435-.174l.002.025a.58.58 0 0 1 .468-.102l.056-.012a.58.58 0 0 1 .234.45l.144-.05a.58.58 0 0 0 .44.196l-.133-.26a.58.58 0 0 0 .433-.174l-.001.03a.58.58 0 0 1 .467-.1l.05-.019a.58.58 0 0 1 .236.448l.153-.078a.58.58 0 0 0 .44.184l-.15-.275a.58.58 0 0 0 .433-.173l-.003.035a.58.58 0 0 1 .467-.1l.045-.026a.58.58 0 0 1 .237.446l.16-.106a.58.58 0 0 0 .44.172l-.168-.288a.58.58 0 0 0 .432-.172l-.006.04a.58.58 0 0 1 .466-.1l.04-.032a.58.58 0 0 1 .239.444l.168-.133a.58.58 0 0 0 .438.16l-.183-.3a.58.58 0 0 0 .432-.17l-.009.045a.58.58 0 0 1 .465-.098l.034-.038a.58.58 0 0 1 .24.441l.174-.16a.58.58 0 0 0 .437.148l-.198-.309a.58.58 0 0 0 .43-.168l-.012.05a.58.58 0 0 1 .464-.097l.029-.043a.58.58 0 0 1 .242.439l.18-.185a.58.58 0 0 0 .436.136l-.21-.317a.58.58 0 0 0 .43-.167l-.015.054a.58.58 0 0 1 .462-.095l.023-.048a.58.58 0 0 1 .243.436l.185-.21a.58.58 0 0 0 .435.124l-.222-.324a.58.58 0 0 0 .429-.166l-.019.058a.58.58 0 0 1 .46-.093l.018-.053a.58.58 0 0 1 .244.433l.19-.233a.58.58 0 0 0 .434.112l-.232-.33a.58.58 0 0 0 .428-.166l-.022.061a.58.58 0 0 1 .458-.09l.013-.057a.58.58 0 0 1 .244.43l.194-.255a.58.58 0 0 0 .432.1l-.242-.334a.58.58 0 0 0 .426-.165l-.025.064a.58.58 0 0 1 .455-.087l.009-.06a.58.58 0 0 1 .245.426l.198-.276a.58.58 0 0 0 .43.088l-.25-.337a.58.58 0 0 0 .425-.164l-.027.067a.58.58 0 0 1 .452-.083l.005-.063a.58.58 0 0 1 .244.423l.202-.295a.58.58 0 0 0 .428.076l-.258-.34a.58.58 0 0 0 .423-.162l-.03.07a.58.58 0 0 1 .449-.078l.001-.065a.58.58 0 0 1 .244.418l.205-.314a.58.58 0 0 0 .426.065l-.264-.341a.58.58 0 0 0 .42-.161l-.032.072a.58.58 0 0 1 .445-.072l-.002.066a.58.58 0 0 1 .243.414l.207-.33a.58.58 0 0 0 .424.054l-.268-.343a.58.58 0 0 0 .418-.16l-.034.074a.58.58 0 0 1 .442-.066l-.004.067a.58.58 0 0 1 .242.408l.21-.347a.58.58 0 0 0 .421.043l-.27-.344a.58.58 0 0 0 .416-.158l-.035.075a.58.58 0 0 1 .438-.06l-.007.067a.58.58 0 0 1 .24.403l.21-.362a.58.58 0 0 0 .419.032l-.272-.345a.58.58 0 0 0 .414-.156l-.036.076a.58.58 0 0 1 .435-.054l-.009.067a.58.58 0 0 1 .238.399l.212-.376a.58.58 0 0 0 .417.02l-.272-.346a.58.58 0 0 0 .411-.154l-.037.077a.58.58 0 0 1 .43-.048l-.012.067a.58.58 0 0 1 .236.394l.212-.39a.58.58 0 0 0 .414.009l-.273-.346a.58.58 0 0 0 .408-.152l-.037.077a.58.58 0 0 1 .426-.041l-.014.066a.58.58 0 0 1 .233.389l.212-.402a.58.58 0 0 0 .41-.002l-.273-.346a.58.58 0 0 0 .406-.15l-.037.077a.58.58 0 0 1 .42-.034l-.017.065a.58.58 0 0 1 .23.383l.211-.414a.58.58 0 0 0 .407-.014l-.273-.345a.58.58 0 0 0-.386-.15l-.036.076a.58.58 0 0 1-.415-.027l-.019.064a.58.58 0 0 1-.228.378l-.209-.425a.58.58 0 0 0-.406.026l.275.346a.58.58 0 0 0 .404.149l.037-.078a.58.58 0 0 1-.418.025l.018-.065a.58.58 0 0 1-.234.389l-.217.414a.58.58 0 0 0-.41.014l.274.345a.58.58 0 0 0 .41.152l.038-.077a.58.58 0 0 1-.422.041l.015-.066a.58.58 0 0 1-.237.394l-.212.402a.58.58 0 0 0-.414-.002l.273.346a.58.58 0 0 0 .416.154l.038-.077a.58.58 0 0 1-.425.048l.012-.067a.58.58 0 0 1-.239.399l-.206.39a.58.58 0 0 0-.417-.02l.272.346a.58.58 0 0 0 .42.156l.037-.076a.58.58 0 0 1-.428.054l.01-.067a.58.58 0 0 1-.24.403l-.202.376a.58.58 0 0 0-.419-.032l.27.344a.58.58 0 0 0 .425.158l.036-.074a.58.58 0 0 1-.43.06l.006-.067a.58.58 0 0 1-.242.408l-.199.362a.58.58 0 0 0-.42.043l.268.343a.58.58 0 0 0 .428.16l.035-.075a.58.58 0 0 1-.432.066l.003-.067a.58.58 0 0 1-.243.414l-.195.347a.58.58 0 0 0-.421.054l.264.341a.58.58 0 0 0 .43.161l.034-.072a.58.58 0 0 1-.435.072l-.001-.066a.58.58 0 0 1-.244.418l-.19.33a.58.58 0 0 0-.424.065l.26.34a.58.58 0 0 0 .432.163l.033-.07a.58.58 0 0 1-.437.078l-.004.063a.58.58 0 0 1-.244.423l-.184.314a.58.58 0 0 0-.426.076l.255.337a.58.58 0 0 0 .433.164l.032-.067a.58.58 0 0 1-.438.083l-.006.06a.58.58 0 0 1-.244.426l-.178.295a.58.58 0 0 0-.428.088l.25.337a.58.58 0 0 0 .434.166l.03-.064a.58.58 0 0 1-.44.087l-.009.058a.58.58 0 0 1-.244.43l-.17.276a.58.58 0 0 0-.43.1l.245.334a.58.58 0 0 0 .435.167l.028-.061a.58.58 0 0 1-.442.093l-.012.054a.58.58 0 0 1-.244.433l-.163.255a.58.58 0 0 0-.432.112l.24.33a.58.58 0 0 0 .436.17l.026-.058a.58.58 0 0 1-.443.098l-.015.05a.58.58 0 0 1-.243.436l-.155.233a.58.58 0 0 0-.433.124l.233.324a.58.58 0 0 0 .438.172l.024-.056a.58.58 0 0 1-.444.103l-.018.047a.58.58 0 0 1-.242.439l-.148.21a.58.58 0 0 0-.434.136l.225.317a.58.58 0 0 0 .44.168l.022-.053a.58.58 0 0 1-.445.107l-.02.043a.58.58 0 0 1-.241.441l-.14.185a.58.58 0 0 0-.435.148l.216.309a.58.58 0 0 0 .44.164l.02-.05a.58.58 0 0 1-.445.11l-.023.04a.58.58 0 0 1-.24.441l-.132.16a.58.58 0 0 0-.436.153l.206.3a.58.58 0 0 0 .442.17l.018-.047a.58.58 0 0 1-.445.114l-.025.037a.58.58 0 0 1-.238.448l-.123.133a.58.58 0 0 0-.437.156l.196.288a.58.58 0 0 0 .443.174l.016-.044a.58.58 0 0 1-.444.117l-.028.034a.58.58 0 0 1-.236.451l-.114.106a.58.58 0 0 0-.437.158l.185.275a.58.58 0 0 0 .444.177l.014-.041a.58.58 0 0 1-.443.12l-.03.03a.58.58 0 0 1-.234.453l-.106.078a.58.58 0 0 0-.436.16l.173.26a.58.58 0 0 0 .444.18l.011-.038a.58.58 0 0 1-.442.123l-.033.026a.58.58 0 0 1-.232.455l-.097.05a.58.58 0 0 0-.435.16l.16.244a.58.58 0 0 0 .445.183l.009-.034a.58.58 0 0 1-.44.126l-.035.023a.58.58 0 0 1-.23.456l-.088.022a.58.58 0 0 0-.434.16l.148.226a.58.58 0 0 0 .445.185l.006-.03a.58.58 0 0 1-.438.128l-.038.019a.58.58 0 0 1-.228.458l-.078.004a.58.58 0 0 0-.433.159l.135.206a.58.58 0 0 0 .445.186l.003-.025a.58.58 0 0 1-.436.13l-.04.015a.58.58 0 0 1-.226.46l-.069-.012a.58.58 0 0 0-.432.156l.122.183a.58.58 0 0 0 .445.187l-.001-.02a.58.58 0 0 1-.434.132l-.043.012a.58.58 0 0 1-.224.46l-.06-.027a.58.58 0 0 0-.43.153l.108.138a.58.58 0 0 0 .444.187l-.005-.015a.58.58 0 0 1-.431.134l-.045.009a.58.58 0 0 1-.221.461l-.051-.041a.58.58 0 0 0-.428.15l.095.107a.58.58 0 0 0 .443.186l-.009-.01a.58.58 0 0 1-.428.136l-.048.006a.58.58 0 0 1-.218.46l-.043-.054a.58.58 0 0 0-.426.148l.08.072a.58.58 0 0 0 .442.184l-.013-.005a.58.58 0 0 1-.425.137l-.05.003a.58.58 0 0 1-.215.46l-.035-.066a.58.58 0 0 0-.423.145l.067.043a.58.58 0 0 0 .44.18l-.017.001a.58.58 0 0 1-.422.139l-.053-.001a.58.58 0 0 1-.212.457l-.027-.078a.58.58 0 0 0-.42.141l.053.008a.58.58 0 0 0 .439.176l-.02.006a.58.58 0 0 1-.418.14l-.056-.005a.58.58 0 0 1-.209.454l-.019-.089a.58.58 0 0 0-.418.138l.038-.026a.58.58 0 0 0 .437.172l-.024.012a.58.58 0 0 1-.414.142l-.059-.009a.58.58 0 0 1-.206.45l-.011-.1a.58.58 0 0 0-.416.134l.024-.059a.58.58 0 0 0 .435.167l-.027.017a.58.58 0 0 1-.41.143l-.062-.013a.58.58 0 0 1-.203.446l-.004-.11a.58.58 0 0 0-.413.13l.009-.091a.58.58 0 0 0 .432.163l-.031.023a.58.58 0 0 1-.406.145l-.064-.016a.58.58 0 0 1-.2.441l.003-.12a.58.58 0 0 0-.41.126l-.006-.123a.58.58 0 0 0 .428.158l-.035.028a.58.58 0 0 1-.401.146l-.067-.02a.58.58 0 0 1-.197.436l.01-.129a.58.58 0 0 0-.407.122l-.02-.154a.58.58 0 0 0 .424.153l-.038.034a.58.58 0 0 1-.395.146l-.069-.023a.58.58 0 0 1-.193.43l.017-.138a.58.58 0 0 0-.403.117l-.034-.184a.58.58 0 0 0 .419.148l-.042.038a.58.58 0 0 1-.389.146l-.07-.026a.58.58 0 0 1-.189.425l.024-.146a.58.58 0 0 0-.4.112l-.047-.214a.58.58 0 0 0 .414.143l-.045.043a.58.58 0 0 1-.382.145l-.071-.029a.58.58 0 0 1-.184.419l.03-.154a.58.58 0 0 0-.396.106l-.06-.242a.58.58 0 0 0 .409.137l-.048.047a.58.58 0 0 1-.374.143l-.072-.031a.58.58 0 0 1-.178.413l.036-.161a.58.58 0 0 0-.392.1l-.072-.269a.58.58 0 0 0 .403.131l-.05.05a.58.58 0 0 1-.365.14l-.072-.034a.58.58 0 0 1-.172.407l.041-.167a.58.58 0 0 0-.387.094l-.083-.294a.58.58 0 0 0 .397.125l-.052.054a.58.58 0 0 1-.356.136l-.073-.036a.58.58 0 0 1-.165.4l.047-.173a.58.58 0 0 0-.382.087l-.094-.317a.58.58 0 0 0 .39.118l-.054.056a.58.58 0 0 1-.346.131l-.073-.038a.58.58 0 0 1-.158.394l.052-.178a.58.58 0 0 0-.376.08l-.103-.338a.58.58 0 0 0 .382.111l-.055.059a.58.58 0 0 1-.335.125l-.073-.04a.58.58 0 0 1-.15.387l.058-.182a.58.58 0 0 0-.37.073l-.112-.357a.58.58 0 0 0 .373.103l-.056.06a.58.58 0 0 1-.323.12l-.072-.041a.58.58 0 0 1-.142.379l.062-.185a.58.58 0 0 0-.363.065l-.12-.374a.58.58 0 0 0 .364.095l-.056.062a.58.58 0 0 1-.31.113l-.071-.043a.58.58 0 0 1-.133.37l.067-.188a.58.58 0 0 0-.356.056l-.128-.388a.58.58 0 0 0 .354.087l-.056.062a.58.58 0 0 1-.295.105l-.07-.045a.58.58 0 0 1-.123.36l.071-.19a.58.58 0 0 0-.349.046l-.135-.4a.58.58 0 0 0 .343.079l-.054.063a.58.58 0 0 1-.278.097l-.068-.046a.58.58 0 0 1-.113.35l.076-.191a.58.58 0 0 0-.341.036l-.14-.41a.58.58 0 0 0 .331.07l-.052.062a.58.58 0 0 1-.26.089l-.066-.047a.58.58 0 0 1-.102.338l.08-.19a.58.58 0 0 0-.332.025l-.145-.418a.58.58 0 0 0 .318.061l-.048.062a.58.58 0 0 1-.24.08l-.063-.047a.58.58 0 0 1-.09.325l.083-.189a.58.58 0 0 0-.322.014l-.149-.424a.58.58 0 0 0 .304.051l-.044.06a.58.58 0 0 1-.217.07l-.059-.048a.58.58 0 0 1-.077.31l.086-.186a.58.58 0 0 0-.31.002l-.151-.427a.58.58 0 0 0 .289.04l-.038.059a.58.58 0 0 1-.193.06l-.054-.048a.58.58 0 0 1-.063.294l.088-.182a.58.58 0 0 0-.297-.01l-.153-.428a.58.58 0 0 0 .272.028l-.032.056a.58.58 0 0 1-.168.05l-.048-.048a.58.58 0 0 1-.048.276l.09-.177a.58.58 0 0 0-.283-.022l-.154-.426a.58.58 0 0 0 .254.015l-.025.054a.58.58 0 0 1-.142.039l-.042-.047a.58.58 0 0 1-.032.257l.091-.171a.58.58 0 0 0-.268-.033l-.154-.422a.58.58 0 0 0 .234.002l-.018.05a.58.58 0 0 1-.115.028l-.036-.046a.58.58 0 0 1-.015.237l.093-.164a.58.58 0 0 0-.252-.044l-.153-.416a.58.58 0 0 0 .212-.011l-.01.047a.58.58 0 0 1-.087.017l-.029-.045a.58.58 0 0 1 0 .215l.094-.156a.58.58 0 0 0-.234-.054l-.15-.408a.58.58 0 0 0 .189-.024l-.002.042a.58.58 0 0 1-.059.006l-.022-.043a.58.58 0 0 1 .015.192l.095-.148a.58.58 0 0 0-.215-.063l-.146-.398a.58.58 0 0 0 .164-.037l.005.038a.58.58 0 0 1-.03-.005l-.015-.04a.58.58 0 0 1 .03.168l.095-.139a.58.58 0 0 0-.195-.07l-.14-.387a.58.58 0 0 0 .138-.049l.013.033a.58.58 0 0 1 0 .016l-.008-.036a.58.58 0 0 1 .045.142l.094-.129a.58.58 0 0 0-.174-.077l-.133-.373a.58.58 0 0 0 .111-.06l.02.028a.58.58 0 0 1 .031.038l.092-.119a.58.58 0 0 0-.151-.082l-.125-.357a.58.58 0 0 0 .083-.07l.028.022a.58.58 0 0 1 .061.06l.089-.108a.58.58 0 0 0-.127-.093l-.116-.34a.58.58 0 0 0 .053-.08l.035.017a.58.58 0 0 1 .091.08l.085-.096a.58.58 0 0 0-.101-.103l-.107-.322a.58.58 0 0 0 .022-.088l.042.011a.58.58 0 0 1 .12.099l.08-.084a.58.58 0 0 0-.074-.113l-.097-.303a.58.58 0 0 0-.009-.105l.048.005a.58.58 0 0 1 .148.117l.074-.07a.58.58 0 0 0-.046-.12l-.086-.282a.58.58 0 0 0-.041-.122l.053-.001a.58.58 0 0 1 .174.134l.066-.055a.58.58 0 0 0-.017-.127l-.074-.26a.58.58 0 0 0-.073-.138l.058-.007a.58.58 0 0 1 .199.15l.057-.04a.58.58 0 0 0 .012-.133l-.062-.237a.58.58 0 0 0-.104-.153l.062-.014a.58.58 0 0 1 .221.164l.047-.024a.58.58 0 0 0 .04-.139l-.049-.212a.58.58 0 0 0-.136-.167l.067-.022a.58.58 0 0 1 .242.176l.037-.008a.58.58 0 0 0 .067-.144l-.034-.186a.58.58 0 0 0-.166-.179l.07-.029a.58.58 0 0 1 .26.186l.026.008a.58.58 0 0 0 .093-.148l-.019-.159a.58.58 0 0 0-.195-.19l.074-.037a.58.58 0 0 1 .276.195l.015.018a.58.58 0 0 0 .117-.15l-.003-.13a.58.58 0 0 0-.224-.199l.077-.044a.58.58 0 0 1 .29.203l.004.027a.58.58 0 0 0 .141-.152l.012-.1a.58.58 0 0 0-.251-.206l.082-.05a.58.58 0 0 1 .303.208l-.006.036a.58.58 0 0 0 .164-.153l.028-.069a.58.58 0 0 0-.277-.211l.087-.056a.58.58 0 0 1 .315.211l-.016.045a.58.58 0 0 0 .186-.153l.043-.038a.58.58 0 0 0-.301-.215l.09-.06a.58.58 0 0 1 .326.213l-.027.052a.58.58 0 0 0 .206-.152l.058-.007a.58.58 0 0 0-.323-.217l.093-.064a.58.58 0 0 1 .335.215l-.037.059a.58.58 0 0 0 .226-.15l.073.025a.58.58 0 0 0-.344-.218l.095-.067a.58.58 0 0 1 .342.216l-.046.064a.58.58 0 0 0 .244-.147l.087.058a.58.58 0 0 0-.362-.218l.097-.07a.58.58 0 0 1 .348.216l-.054.069a.58.58 0 0 0 .262-.143l.1.09a.58.58 0 0 0-.378-.217l.098-.073a.58.58 0 0 1 .352.214l-.061.072a.58.58 0 0 0 .278-.139l.112.123a.58.58 0 0 0-.391-.214l.099-.075a.58.58 0 0 1 .354.212l-.068.075a.58.58 0 0 0 .292-.133l.123.155a.58.58 0 0 0-.402-.21l.099-.077a.58.58 0 0 1 .355.208l-.074.077a.58.58 0 0 0 .304-.126l.134.188a.58.58 0 0 0-.412-.204l.099-.078a.58.58 0 0 1 .355.204l-.079.079a.58.58 0 0 0 .315-.119l.143.219a.58.58 0 0 0-.42-.197l.098-.079a.58.58 0 0 1 .354.198l-.083.08a.58.58 0 0 0 .324-.11l.151.248a.58.58 0 0 0-.425-.189l.096-.079a.58.58 0 0 1 .352.191l-.087.08a.58.58 0 0 0 .332-.101l.158.274a.58.58 0 0 0-.427-.18l.094-.079a.58.58 0 0 1 .348.183l-.09.08a.58.58 0 0 0 .34-.092l.163.298a.58.58 0 0 0-.428-.17l.091-.079a.58.58 0 0 1 .343.174l-.092.079a.58.58 0 0 0 .346-.083l.167.319a.58.58 0 0 0-.429-.16l.087-.078a.58.58 0 0 1 .337.164l-.093.077a.58.58 0 0 0 .35-.073l.17.34a.58.58 0 0 0-.428-.15l.083-.076a.58.58 0 0 1 .33.154l-.094.075a.58.58 0 0 0 .353-.063l.172.358a.58.58 0 0 0-.425-.14l.078-.074a.58.58 0 0 1 .322.143l-.094.072a.58.58 0 0 0 .355-.052l.173.373a.58.58 0 0 0-.42-.128l.072-.071a.58.58 0 0 1 .31.13l-.094.069a.58.58 0 0 0 .355-.041l.173.386a.58.58 0 0 0-.414-.116l.066-.068a.58.58 0 0 1 .298.117l-.093.065a.58.58 0 0 0 .355-.03l.172.397a.58.58 0 0 0-.407-.103l.06-.065a.58.58 0 0 1 .284.103l-.092.061a.58.58 0 0 0 .354-.018l.17.406a.58.58 0 0 0-.398-.09l.053-.062a.58.58 0 0 1 .268.088l-.09.056a.58.58 0 0 0 .352-.005l.166.413a.58.58 0 0 0-.387-.076l.045-.058a.58.58 0 0 1 .25.071l-.087.05a.58.58 0 0 0 .349.007l.16.418a.58.58 0 0 0-.374-.06l.037-.054a.58.58 0 0 1 .23.054l-.083.044a.58.58 0 0 0 .343.019l.154.422a.58.58 0 0 0-.36-.043l.028-.049a.58.58 0 0 1 .211.036l-.078.037a.58.58 0 0 0 .336.03l.146.424a.58.58 0 0 0-.345-.025l.019-.044a.58.58 0 0 1 .192.017l-.072.03a.58.58 0 0 0 .327.04l.138.424a.58.58 0 0 0-.328-.006l.01-.038a.58.58 0 0 1 .171-.002l-.065.022a.58.58 0 0 0 .317.049l.128.424a.58.58 0 0 0-.31.012l.002-.032a.58.58 0 0 1 .15-.02l-.057.013a.58.58 0 0 0 .305.056l.117.423a.58.58 0 0 0-.29-.019l-.006-.026a.58.58 0 0 1 .128-.039l-.049.004a.58.58 0 0 0 .292.062l.106.42a.58.58 0 0 0-.269-.025l-.014-.019a.58.58 0 0 1 .105-.057l-.04-.004a.58.58 0 0 0 .277.067l.094.415a.58.58 0 0 0-.247-.03l-.022-.013a.58.58 0 0 1 .081-.074l-.031-.012a.58.58 0 0 0 .26.07l.08.41a.58.58 0 0 0-.224-.034l-.029-.006a.58.58 0 0 1 .056-.09l-.022-.019a.58.58 0 0 0 .244.072l.065.403a.58.58 0 0 0-.2-.037l-.036.001a.58.58 0 0 1 .03-.104l-.003-.025a.58.58 0 0 0 .228.073l.05.394a.58.58 0 0 0-.174-.044l-.042.008a.58.58 0 0 1 .004-.117l.016-.031a.58.58 0 0 0 .21.073l.034.383a.58.58 0 0 0-.147-.05l-.048.016a.58.58 0 0 1-.022-.13l.036-.037a.58.58 0 0 0 .193.073l.017.372a.58.58 0 0 0-.119-.056l-.053.025a.58.58 0 0 1-.048-.142l.056-.043a.58.58 0 0 0 .174.072l-.005.358a.58.58 0 0 0-.09-.06l-.058.033a.58.58 0 0 1-.073-.154l.076-.048a.58.58 0 0 0 .156.07l-.027.341a.58.58 0 0 0-.06-.064l-.063.041a.58.58 0 0 1-.098-.165l.096-.053a.58.58 0 0 0 .136.067l-.059.323a.58.58 0 0 0-.03-.067l-.067.049a.58.58 0 0 1-.123-.175l.116-.058a.58.58 0 0 0 .116.063l-.09.303a.58.58 0 0 0 0-.07l-.072.056a.58.58 0 0 1-.147-.183l.136-.062a.58.58 0 0 0 .094.057l-.121.283a.58.58 0 0 0 .031-.073l-.077.062a.58.58 0 0 1-.17-.19l.154-.065a.58.58 0 0 0 .072.05l-.151.242a.58.58 0 0 0 .062-.079l-.082.067a.58.58 0 0 1-.194-.197l.172-.067a.58.58 0 0 0 .049.042l-.18.199a.58.58 0 0 0 .094-.085l-.086.072a.58.58 0 0 1-.216-.203l.188-.069a.58.58 0 0 0 .025.033l-.207.155a.58.58 0 0 0 .125-.09l-.09.077a.58.58 0 0 1-.236-.208l.203-.07a.58.58 0 0 0 0 .023l-.232.11a.58.58 0 0 0 .156-.094l-.093.081a.58.58 0 0 1-.255-.212l.216-.07a.58.58 0 0 0-.024.013l-.255.064a.58.58 0 0 0 .186-.098l-.095.084a.58.58 0 0 1-.273-.215l.226-.07a.58.58 0 0 0-.049-.003l-.276.018a.58.58 0 0 0 .215-.1l-.097.086a.58.58 0 0 1-.288-.217l.234-.068a.58.58 0 0 0-.074-.02l-.295-.028a.58.58 0 0 0 .243-.102l-.099.087a.58.58 0 0 1-.302-.218l.241-.065a.58.58 0 0 0-.099-.036l-.311-.074a.58.58 0 0 0 .27-.103l-.1.088a.58.58 0 0 1-.313-.218l.246-.062a.58.58 0 0 0-.123-.05l-.326-.12a.58.58 0 0 0 .295-.103l-.1.088a.58.58 0 0 1-.323-.216l.256-.058a.58.58 0 0 0-.146-.063l-.338-.164a.58.58 0 0 0 .318-.103l-.099.086a.58.58 0 0 1-.331-.213l.264-.053a.58.58 0 0 0-.168-.075l-.348-.206a.58.58 0 0 0 .34-.102l-.097.083a.58.58 0 0 1-.337-.209l.27-.047a.58.58 0 0 0-.188-.087l-.355-.245a.58.58 0 0 0 .36-.1l-.094.08a.58.58 0 0 1-.342-.204l.275-.041a.58.58 0 0 0-.207-.099l-.36-.281a.58.58 0 0 0 .377-.098l-.09.076a.58.58 0 0 1-.345-.198l.278-.034a.58.58 0 0 0-.224-.11l-.363-.314a.58.58 0 0 0 .392-.094l-.084.071a.58.58 0 0 1-.346-.19l.28-.026a.58.58 0 0 0-.24-.119l-.364-.344a.58.58 0 0 0 .405-.089l-.076.066a.58.58 0 0 1-.346-.18l.282-.017a.58.58 0 0 0-.253-.126l-.362-.371a.58.58 0 0 0 .416-.083l-.067.059a.58.58 0 0 1-.345-.17l.282-.007a.58.58 0 0 0-.265-.132l-.359-.395a.58.58 0 0 0 .424-.076l-.057.052a.58.58 0 0 1-.343-.158l.282.003a.58.58 0 0 0-.275-.136l-.353-.415a.58.58 0 0 0 .431-.069l-.047.044a.58.58 0 0 1-.34-.145l.28.013a.58.58 0 0 0-.283-.139l-.344-.43a.58.58 0 0 0 .436-.06l-.036.036a.58.58 0 0 1-.335-.13l.276.022a.58.58 0 0 0-.289-.14l-.332-.442a.58.58 0 0 0 .44-.049l-.024.027a.58.58 0 0 1-.329-.114l.27.03a.58.58 0 0 0-.293-.141l-.318-.45a.58.58 0 0 0 .442-.037l-.012.018a.58.58 0 0 1-.321-.096l.262.038a.58.58 0 0 0-.295-.14l-.301-.455a.58.58 0 0 0 .442-.024l.001.009a.58.58 0 0 1-.312-.076l.252.045a.58.58 0 0 0-.295-.137l-.282-.456a.58.58 0 0 0 .44-.01l.014.001a.58.58 0 0 1-.301-.055l.242.052a.58.58 0 0 0-.294-.132l-.261-.456a.58.58 0 0 0 .437.004l.026-.006a.58.58 0 0 1-.288-.033l.23.059a.58.58 0 0 0-.29-.124l-.238-.454a.58.58 0 0 0 .431.019l.038-.012a.58.58 0 0 1-.274-.01l.217.064a.58.58 0 0 0-.284-.114l-.213-.449a.58.58 0 0 0 .423.032l.049-.019a.58.58 0 0 1-.258.012l.203.069a.58.58 0 0 0-.276-.105l-.186-.447a.58.58 0 0 0 .413.044l.06-.025a.58.58 0 0 1-.242.033l.186.073a.58.58 0 0 0-.265-.095l-.157-.438a.58.58 0 0 0 .402.054l.07-.031a.58.58 0 0 1-.224.054l.168.076a.58.58 0 0 0-.253-.084l-.126-.426a.58.58 0 0 0 .39.063l.079-.037a.58.58 0 0 1-.205.074l.15.079a.58.58 0 0 0-.24-.072l-.094-.41a.58.58 0 0 0 .376.07l.087-.042a.58.58 0 0 1-.186.093l.13.08a.58.58 0 0 0-.225-.058l-.061-.392a.58.58 0 0 0 .36.076l.095-.046a.58.58 0 0 1-.166.11l.11.082a.58.58 0 0 0-.208-.043l-.027-.372a.58.58 0 0 0 .343.08l.102-.05a.58.58 0 0 1-.144.126l.071.083a.58.58 0 0 0-.19-.027l.007-.35a.58.58 0 0 0 .325.082l.108-.053a.58.58 0 0 1-.12.14l.031.083a.58.58 0 0 0-.17-.01l.041-.326a.58.58 0 0 0 .304.083l.114-.056a.58.58 0 0 1-.095.153l-.009.083a.58.58 0 0 0-.148.006l.075-.3a.58.58 0 0 0 .283.083l.118-.058a.58.58 0 0 1-.069.165l-.048.08a.58.58 0 0 0-.124.022l.11-.274a.58.58 0 0 0 .26.082l.121-.059a.58.58 0 0 1-.042.175l-.088.077a.58.58 0 0 0-.098.038l.144-.247a.58.58 0 0 0 .236.08l.123-.06a.58.58 0 0 1-.014.185l-.127.073a.58.58 0 0 0-.07.053l.177-.218a.58.58 0 0 0 .21.076l.124-.062a.58.58 0 0 1 .014.195l-.206.068a.58.58 0 0 0-.041.067l-.206-.218a.58.58 0 0 0 .183.07l.124-.062a.58.58 0 0 1 .043.203l-.285.062a.58.58 0 0 0-.037.08l-.284-.185a.58.58 0 0 0 .154.063l.124-.062a.58.58 0 0 1 .101.21l-.362.055a.58.58 0 0 0-.031.092l-.361-.151a.58.58 0 0 0 .123.054l.123-.062a.58.58 0 0 1 .157.216l-.437.047a.58.58 0 0 0-.024.103l-.435-.117a.58.58 0 0 0 .091.044l.121-.062a.58.58 0 0 1 .212.227l-.51.036Z" fill="#36C5F0"/>
          <path d="M19.794 15.535a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Z" fill="#2EB67D"/>
          <path d="M14.753 10.376a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Z" fill="#ECB22E"/>
          <path d="M14.753 5.217a2.528 2.528 0 0 1-2.303 1.301l-.533.091a2.528 2.528 0 0 1-2.655-1.655l-.091-.533a2.528 2.528 0 0 1 1.655-2.655l.533-.091a2.528 2.528 0 0 1 2.655 1.655l.091.533a2.528 2.528 0 0 1-1.655 2.655Z" fill="#E01E5A"/>
        </svg>
      ),
      connected: !!slackIntegration,
      integration: slackIntegration,
    },
    {
      id: "google-sheets",
      name: "Google Sheets",
      description: "Read and write spreadsheet data",
      icon: (
        <svg className="w-8 h-8" viewBox="0 0 24 24" fill="none">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" fill="#34A853"/>
        </svg>
      ),
      connected: false,
      comingSoon: true,
    },
    {
      id: "google-calendar",
      name: "Google Calendar",
      description: "Sync and manage calendar events",
      icon: (
        <svg className="w-8 h-8" viewBox="0 0 24 24" fill="none">
          <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" fill="#4285F4"/>
        </svg>
      ),
      connected: false,
      comingSoon: true,
    },
    {
      id: "notion",
      name: "Notion",
      description: "Access and update Notion databases",
      icon: (
        <svg className="w-8 h-8" viewBox="0 0 24 24" fill="none">
          <path d="M4.459 4.208c.768.587 1.756.706 2.648.706.9 0 1.756-.12 2.54-.706l6.21-4.648a.642.642 0 0 0-.771-1.02L11.084.348a.642.642 0 0 0-.771 1.02L4.103 6.02a.642.642 0 0 0 .356 1.188zm11.72 4.208L19.539 6.02a.642.642 0 0 0 .356-1.188l-6.21-4.648a.642.642 0 0 0-.771-1.02L7.093.348a.642.642 0 0 0-.771 1.02L12.533 6.02a.642.642 0 0 0 .646 1.395zm0 5.876L19.539 11.896a.642.642 0 0 0 .356-1.188l-6.21-4.648a.642.642 0 0 0-.771-1.02L7.093 6.224a.642.642 0 0 0-.771 1.02L12.533 11.896a.642.642 0 0 0 .646 1.395zm0 5.876L19.539 17.772a.642.642 0 0 0 .356-1.188l-6.21-4.648a.642.642 0 0 0-.771-1.02L7.093 12.1a.642.642 0 0 0-.771 1.02L12.533 17.772a.642.642 0 0 0 .646 1.395zm0 5.876L19.539 23.648a.642.642 0 0 0 .356-1.188l-6.21-4.648a.642.642 0 0 0-.771-1.02L7.093 17.976a.642.642 0 0 0-.771 1.02L12.533 23.648a.642.642 0 0 0 .646 1.395z" fill="#000"/>
        </svg>
      ),
      connected: false,
      comingSoon: true,
    },
  ];

  return (
    <div className="min-h-screen bg-black">
      {/* Header */}
      <div className="border-b border-white/10 bg-black">
        <div className="container mx-auto px-8 py-8">
          <Link href="/dashboard">
            <Button
              variant="ghost"
              className="text-white/60 hover:text-white mb-4 rounded-full"
            >
              <ArrowLeft className="mr-2 h-4 w-4" />
              Back to Dashboard
            </Button>
          </Link>

          <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
            <div>
              <h1 className="text-3xl font-bold text-white">Integrations</h1>
              <p className="text-white/50 mt-1">
                Connect apps to extend Execute's capabilities
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* Success/Error Messages */}
      {success === "slack_connected" && (
        <div className="container mx-auto px-8 py-4">
          <div className="flex items-center gap-3 px-4 py-3 bg-green-500/10 border border-green-500/30 rounded-xl">
            <CheckCircle className="h-5 w-5 text-green-400" />
            <p className="text-green-400">Slack connected successfully!</p>
          </div>
        </div>
      )}

      {error && (
        <div className="container mx-auto px-8 py-4">
          <div className="flex items-center gap-3 px-4 py-3 bg-red-500/10 border border-red-500/30 rounded-xl">
            <XCircle className="h-5 w-5 text-red-400" />
            <p className="text-red-400">
              {error === "access_denied" && "Connection was cancelled."}
              {error === "invalid_callback" && "Invalid callback parameters."}
              {error === "expired_state" && "Connection expired. Please try again."}
              {error === "invalid_state" && "Invalid state parameter."}
              {error === "state_mismatch" && "Security verification failed."}
              {error === "unauthorized" && "You need to sign in first."}
              {error === "missing_config" && "Slack is not configured on the server."}
              {error === "token_exchange_failed" && "Failed to connect to Slack."}
              {error === "user_not_found" && "User account not found."}
              {error !== "access_denied" && error !== "invalid_callback" && error !== "expired_state" && error !== "invalid_state" && error !== "state_mismatch" && error !== "unauthorized" && error !== "missing_config" && error !== "token_exchange_failed" && error !== "user_not_found" && `Connection error: ${error}`}
            </p>
          </div>
        </div>
      )}

      {/* Content */}
      <div className="container mx-auto px-8 py-8">
        {loading ? (
          <div className="flex items-center justify-center h-64">
            <Loader2 className="h-8 w-8 text-white/40 animate-spin" />
          </div>
        ) : (
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {availableIntegrations.map((integration) => (
              <div
                key={integration.id}
                className={`bg-white/[0.02] border border-white/10 rounded-xl p-6 transition-all hover:border-white/20 ${
                  integration.comingSoon ? "opacity-50" : ""
                }`}
              >
                {/* Integration Icon */}
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center gap-4">
                    <div className="flex-shrink-0 p-3 bg-white/5 rounded-lg">
                      {integration.icon}
                    </div>
                    <div>
                      <h3 className="text-lg font-semibold text-white">
                        {integration.name}
                      </h3>
                      {integration.connected && integration.integration && (
                        <p className="text-sm text-white/40">
                          {integration.integration.config.team_name}
                          {integration.integration.config.default_channel_name && (
                            <span className="ml-2 text-white/30">
                              â€¢ {integration.integration.config.default_channel_name}
                            </span>
                          )}
                        </p>
                      )}
                    </div>
                  </div>

                  {/* Status Badge */}
                  <div>
                    {integration.connected ? (
                      <span className="inline-flex items-center gap-1 px-2 py-1 text-xs bg-green-500/10 text-green-400 border border-green-500/30 rounded-full">
                        <span className="w-1.5 h-1.5 rounded-full bg-green-400" />
                        Connected
                      </span>
                    ) : integration.comingSoon ? (
                      <span className="inline-flex items-center gap-1 px-2 py-1 text-xs bg-white/5 text-white/40 border border-white/10 rounded-full">
                        Coming Soon
                      </span>
                    ) : (
                      <span className="inline-flex items-center gap-1 px-2 py-1 text-xs bg-white/5 text-white/40 border border-white/10 rounded-full">
                        <span className="w-1.5 h-1.5 rounded-full bg-white/30" />
                        Not Connected
                      </span>
                    )}
                  </div>
                </div>

                {/* Description */}
                <p className="text-white/50 text-sm mb-6">
                  {integration.description}
                </p>

                {/* Action Button */}
                {integration.comingSoon ? (
                  <Button
                    variant="outline"
                    className="w-full border-white/20 text-white/40 cursor-not-allowed"
                    disabled
                  >
                    <Puzzle className="mr-2 h-4 w-4" />
                    Connect {integration.name}
                  </Button>
                ) : integration.connected ? (
                  <div className="flex gap-2">
                    <Button
                      variant="outline"
                      className="flex-1 border-white/20 text-white hover:bg-white/5"
                      onClick={() => router.push(`/dashboard/workflows/new?slack=true`)}
                    >
                      Create Workflow
                    </Button>
                    <Button
                      variant="ghost"
                      className="text-white/60 hover:text-red-400 px-3"
                      onClick={() => handleDisconnect(integration.integration!.id)}
                      disabled={disconnecting === integration.integration!.id}
                    >
                      {disconnecting === integration.integration!.id ? (
                        <Loader2 className="h-4 w-4 animate-spin" />
                      ) : (
                        <Trash2 className="h-4 w-4" />
                      )}
                    </Button>
                  </div>
                ) : (
                  <Button
                    className={`w-full ${
                      integration.id === "slack"
                        ? "btn-gradient text-black hover:opacity-90"
                        : "border-white/20 text-white hover:bg-white/5"
                    }`}
                    onClick={() =>
                      integration.id === "slack"
                        ? (window.location.href = "/api/integrations/slack/connect")
                        : null
                    }
                  >
                    <Puzzle className="mr-2 h-4 w-4" />
                    Connect {integration.name}
                  </Button>
                )}

                {/* Learn More Link for Slack */}
                {integration.id === "slack" && !integration.connected && (
                  <a
                    href="https://slack.com/help/articles/115005265063-incoming-webhooks-for-slack"
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex items-center gap-1 text-xs text-white/40 hover:text-white/60 mt-4 transition-colors"
                  >
                    Learn about Slack webhooks
                    <ExternalLink className="h-3 w-3" />
                  </a>
                )}
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}
